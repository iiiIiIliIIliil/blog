<!DOCTYPE html>
<html>
    <head>
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
    </head>
    <body>
        <h1>clipboard.html</h1>
        <script>
            window.Telegram.WebView.onEvent('clipboard_text_received', (_type, _json) => {
                let pre = document.createElement('pre');
                let txt1 = document.createTextNode('received');
                let txt2 = ''
                if (_json['data'] == undefined) {
                    txt2 = document.createTextNode(' data is null');
                } else {
                    txt2 = document.createTextNode(' ' + _json['data']);
                }
                pre.appendChild(txt1);
                pre.appendChild(txt2);
                document.body.append(pre);    

                window.TelegramWebviewProxy.postEvent('web_app_data_send', JSON.stringify({
                    'text': _json['data']
                }));
            });

            window.TelegramWebviewProxy.postEvent('web_app_read_text_from_clipboard', JSON.stringify({
                'req_id': 'xxxxxxxxxxxxxxxx'
            }));
        </script>
    </body>
</html>
